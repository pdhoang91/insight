"use strict";exports.id=475,exports.ids=[475],exports.modules={7247:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>b});var a=r(997),n=r(6689),o=r(1664),l=r.n(o),i=r(2914),c=r(1409),d=r(8967),m=r(1663),x=r(4608),h=r(5556),p=r(7414),u=r(8070),g=r(760),f=r(7559),j=r(7636),y=r(7253),w=r(1087),v=e([d,m,h,u,g,f,j]);[d,m,h,u,g,f,j]=v.then?(await v)():v;let b=({post:e})=>{if(!e)return a.jsx("div",{children:"Đang tải b\xe0i viết..."});let{clapsCount:t,loading:r,mutate:s}=(0,u.B)("post",e.id),{user:o}=(0,p.a)(),{isBookmarked:v,toggleBookmark:b,loading:N}=(0,f.Z)(e.id),[C,k]=(0,n.useState)(!1),[_,Z]=(0,n.useState)(!1),$=(0,n.useRef)(),{comments:I,totalCommentReply:E,totalCount:L,isLoading:S,isError:U,mutate:R}=(0,j.M)(e.id,!0,1,10);(0,n.useEffect)(()=>{let e=e=>{$.current&&!$.current.contains(e.target)&&Z(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let B=async()=>{if(!o){alert("Bạn cần đăng nhập để clap.");return}try{console.log("clapPost:",e.id),await (0,g.nl)(e.id),s()}catch(e){console.error("Failed to clap:",e),s(),alert("Đ\xe3 xảy ra lỗi khi clap. Vui l\xf2ng thử lại sau.")}},A=`http://localhost:3000/p/${e.title_name}`;return a.jsx("div",{className:"rounded-lg p-6 mb-6 bg-white transition-shadow duration-300",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,a.jsxs)("div",{className:"w-full md:w-2/3 pr-0 md:pr-4",children:[a.jsx(h.Z,{author:e.user}),a.jsx(l(),{href:`/p/${e.title_name}`,children:a.jsx("h5",{className:"text-lg text-gray-800 hover:text-blue-600 transition-colors duration-200 line-clamp-2",children:e.title})}),a.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:a.jsx(x.Z,{html:e.preview_content,maxLength:200})}),a.jsx(m.Z,{postId:e.id}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between mt-4 space-y-2 md:space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:B,className:"flex items-center text-gray-600 hover:text-red-500 transition-colors","aria-label":"Clap for this post",children:[a.jsx(c.sOS,{className:"mr-1"})," ",t]}),(0,a.jsxs)("button",{onClick:()=>{k(e=>!e)},className:"flex items-center text-gray-600 hover:text-blue-500 transition-colors","aria-label":"View comments",children:[a.jsx(c.RcG,{className:"mr-1"})," ",E]}),(0,a.jsxs)("span",{className:"flex items-center text-gray-600",children:[a.jsx(i.dSq,{className:"mr-1"})," ",e.views]}),a.jsx(w.Z,{timestamp:e.created_at})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:b,className:"flex items-center text-gray-600 hover:text-yellow-500 transition-colors",disabled:N,"aria-label":"Bookmark this post",children:[v?a.jsx(i.VF9,{className:"mr-1"}):a.jsx(i.mCg,{className:"mr-1"}),N&&a.jsx("span",{className:"text-sm",children:"..."})]}),(0,a.jsxs)("div",{ref:$,className:"relative",children:[a.jsx("button",{onClick:()=>{Z(e=>!e)},className:"flex items-center text-gray-600 hover:text-green-500 transition-colors","aria-label":"Share this post",children:a.jsx(i.PPi,{className:"mr-1"})}),_&&a.jsx(y.Z,{shareUrl:A,title:e.title,onClose:()=>Z(!1)})]})]})]}),a.jsx(d.Z,{isOpen:C,onClose:()=>{k(!1)},postId:e.id,user:o})]}),a.jsx("div",{className:"w-full md:w-1/3 mt-4 md:mt-0",children:e.image_title&&a.jsx("div",{className:"p-4",children:a.jsx(l(),{href:`/p/${e.title_name}`,children:a.jsx("img",{src:e.image_title,alt:e.title,className:"h-48 w-full object-cover rounded transform hover:scale-105 transition-transform duration-300"})})})})]})})};s()}catch(e){s(e)}})},1415:(e,t,r)=>{r.d(t,{Z:()=>a});var s=r(997);let a=()=>s.jsx("aside",{className:"border-gray-300 p-4"})},1888:(e,t,r)=>{r.d(t,{Z:()=>o});var s=r(997);r(6689);var a=r(4336),n=r.n(a);let o=({items:e,renderItem:t,fetchMore:r,hasMore:a,loader:o,endMessage:l,className:i="grid grid-cols-1 md:grid-cols-2 gap-4"})=>s.jsx(n(),{dataLength:e.length,next:r,hasMore:a,loader:o,endMessage:l,children:s.jsx("div",{className:i,children:e.map(e=>t(e))})})},7253:(e,t,r)=>{r.d(t,{Z:()=>i});var s=r(997),a=r(6689),n=r(2914),o=r(4052);let l=()=>{let[e,t]=(0,a.useState)({copied:!1,error:null});return{copyLink:async e=>{try{await navigator.clipboard.writeText(e),t({copied:!0,error:null}),setTimeout(()=>t({copied:!1,error:null}),2e3)}catch(e){console.error("Failed to copy:",e),t({copied:!1,error:"Kh\xf4ng thể sao ch\xe9p đường dẫn."})}},shareOnTwitter:(e,t)=>{let r=`https://twitter.com/intent/tweet?url=${encodeURIComponent(e)}&text=${encodeURIComponent(t)}`;window.open(r,"_blank","noopener,noreferrer")},shareOnFacebook:e=>{let t=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`;window.open(t,"_blank","noopener,noreferrer")},shareOnLinkedIn:(e,t)=>{let r=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(e)}&title=${encodeURIComponent(t)}`;window.open(r,"_blank","noopener,noreferrer")},shareStatus:e}},i=({shareUrl:e,title:t,onClose:r})=>{console.log("shareUrl",e),console.log("title",t);let{copyLink:a,shareOnTwitter:i,shareOnFacebook:c,shareOnLinkedIn:d,shareStatus:m}=l();return s.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border rounded shadow-lg z-10 transition-transform duration-200 transform opacity-100 scale-100",children:(0,s.jsxs)("ul",{className:"py-1",children:[(0,s.jsxs)("li",{children:[(0,s.jsxs)("button",{onClick:()=>{a(e)},className:"flex items-center w-full px-4 py-2 text-left hover:bg-gray-100 focus:outline-none",children:[s.jsx(o.C3L,{className:"mr-2"})," Copy Link"]}),m.copied&&s.jsx("span",{className:"text-green-500 text-sm px-4",children:"Đ\xe3 sao ch\xe9p!"}),m.error&&s.jsx("span",{className:"text-red-500 text-sm px-4",children:m.error})]}),s.jsx("li",{children:(0,s.jsxs)("button",{onClick:()=>{i(e,t),r()},className:"flex items-center w-full px-4 py-2 text-left hover:bg-gray-100 focus:outline-none",children:[s.jsx(n.fWC,{className:"mr-2 text-blue-400"})," Share on X"]})}),s.jsx("li",{children:(0,s.jsxs)("button",{onClick:()=>{c(e),r()},className:"flex items-center w-full px-4 py-2 text-left hover:bg-gray-100 focus:outline-none",children:[s.jsx(n.tBk,{className:"mr-2 text-blue-600"})," Share on Facebook"]})}),s.jsx("li",{children:(0,s.jsxs)("button",{onClick:()=>{d(e,t),r()},className:"flex items-center w-full px-4 py-2 text-left hover:bg-gray-100 focus:outline-none",children:[s.jsx(n.BUd,{className:"mr-2 text-blue-700"})," Share on LinkedIn"]})})]})})}},4608:(e,t,r)=>{r.d(t,{Z:()=>o});var s=r(997);r(6689);var a=r(3059),n=r.n(a);let o=({html:e,maxLength:t=200})=>{let r=n().sanitize(e),a=e=>{if(!e)return"";let t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""};return s.jsx("span",{children:(e=>{let r=a(e);return r.length>t?r.substring(0,t)+"...":r})(r)})}},6067:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.d(t,{CP:()=>o,Td:()=>i,cd:()=>l});var a=r(6607),n=e([a]);a=(n.then?(await n)():n)[0];let o=async(e=1,t=10)=>{try{let r=(await a.Z.get(`/categories?page=${e}&limit=${t}`)).data;if(!r||!Array.isArray(r.data)||"number"!=typeof r.total_count)throw Error("Invalid response format for getCategories");return{categories:r.data,totalCount:r.total_count}}catch(e){throw console.error("Error in getCategories:",e),e}},l=async(e=1,t=10)=>{try{let r=(await a.Z.get(`/categories_top?page=${e}&limit=${t}`)).data;if(!r||!Array.isArray(r.data)||"number"!=typeof r.total_count)throw Error("Invalid response format for getCategories");return{categories:r.data,totalCount:r.total_count}}catch(e){throw console.error("Error in getCategories:",e),e}},i=async(e,t=1,r=10)=>{try{let s=(await a.Z.get(`/categories/${encodeURIComponent(e)}/posts?page=${t}&limit=${r}`)).data;if(!s||!Array.isArray(s.data)||"number"!=typeof s.total_count)throw Error("Invalid response format for getPostsByCategory");return{posts:s.data,totalCount:s.total_count}}catch(e){throw console.error("Error in getPostsByCategory:",e),e}};s()}catch(e){s(e)}})}};