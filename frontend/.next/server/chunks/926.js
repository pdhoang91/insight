exports.id=926,exports.ids=[926],exports.modules={3352:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var a=r(997),s=r(9816),o=r.n(s),l=r(6689),n=r(3461);let c=()=>{window.location.href=`${n.M}/auth/google`};var i=r(7414);let d=(e,t)=>{let{user:r}=(0,i.a)();(0,l.useEffect)(()=>{r&&e&&t()},[r,e,t])},u=({isOpen:e,onClose:t})=>(d(e,t),e)?(0,a.jsxs)("div",{onClick:t,className:"jsx-1619804c3c0df6c6 fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 transition-opacity duration-300 ease-out z-50",children:[(0,a.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{animation:"fadeIn 0.3s ease-out"},className:"jsx-1619804c3c0df6c6 bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 p-8 rounded-lg shadow-lg w-full max-w-md mx-4 transform transition-transform duration-300 ease-out scale-95 hover:scale-100 opacity-100 z-60",children:[a.jsx("h2",{className:"jsx-1619804c3c0df6c6 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-teal-300 to-blue-500 mb-6 text-center",children:"Welcome Back"}),a.jsx("p",{className:"jsx-1619804c3c0df6c6 text-gray-400 mb-8 text-center",children:"Sign in to continue your journey with us."}),(0,a.jsxs)("div",{className:"jsx-1619804c3c0df6c6 flex flex-col items-center space-y-4",children:[a.jsx("button",{onClick:c,className:"jsx-1619804c3c0df6c6 bg-gradient-to-r from-blue-600 to-teal-400 text-white w-full py-3 rounded-full text-lg font-semibold shadow-md transition-transform transform hover:scale-105 active:scale-95 hover:shadow-xl",children:"Sign In with Google"}),a.jsx("button",{onClick:t,className:"jsx-1619804c3c0df6c6 w-full py-3 rounded-full text-lg font-semibold text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors hover:text-white",children:"Cancel"})]})]}),a.jsx(o(),{id:"1619804c3c0df6c6",children:"@-webkit-keyframes fadeIn{from{opacity:0;-webkit-transform:scale(.9);transform:scale(.9)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@-moz-keyframes fadeIn{from{opacity:0;-moz-transform:scale(.9);transform:scale(.9)}to{opacity:1;-moz-transform:scale(1);transform:scale(1)}}@-o-keyframes fadeIn{from{opacity:0;-o-transform:scale(.9);transform:scale(.9)}to{opacity:1;-o-transform:scale(1);transform:scale(1)}}@keyframes fadeIn{from{opacity:0;-webkit-transform:scale(.9);-moz-transform:scale(.9);-o-transform:scale(.9);transform:scale(.9)}to{opacity:1;-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}"})]}):null},8262:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>m});var s=r(997),o=r(6689),l=r(1664),n=r.n(l),c=r(9648),i=r(7414),d=r(1163),u=e([c]);c=(u.then?(await u)():u)[0];let m=()=>{let{user:e,setUser:t,setModalOpen:r,loading:a}=(0,i.a)(),[l,u]=(0,o.useState)(!1),m=(0,o.useRef)(null),h=(0,d.useRouter)(),[f,x]=(0,o.useState)(""),[g,p]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let y=e=>{e.preventDefault(),f.trim()&&(h.push(`/search?q=${encodeURIComponent(f.trim())}`),x(""))},b="/write"===h.pathname;return(0,s.jsxs)("nav",{className:"flex justify-between items-center p-4 sticky top-0 z-50",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[s.jsx(n(),{href:"/",passHref:!0,className:"text-2xl font-bold text-gray-800",children:"Insight"}),(0,s.jsxs)("form",{onSubmit:y,className:"relative hidden md:block",children:[s.jsx("input",{type:"text",value:f,onChange:e=>x(e.target.value),className:"w-64 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-blue-500",placeholder:"t\xecm kiếm...","aria-label":"Search"}),s.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2","aria-label":"Submit Search",children:s.jsx("svg",{className:"w-5 h-5 text-gray-400 hover:text-blue-500 transition-colors",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),s.jsx("div",{className:"md:hidden",children:s.jsx("button",{onClick:()=>{p(e=>!e)},className:"text-gray-600 hover:text-blue-500 focus:outline-none","aria-label":"Toggle Menu",children:g?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),(0,s.jsxs)("div",{className:`flex items-center space-x-4 ${g?"block":"hidden"} md:flex`,children:[(0,s.jsxs)("form",{onSubmit:y,className:"relative md:hidden",children:[s.jsx("input",{type:"text",value:f,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-blue-500",placeholder:"T\xecm kiếm...","aria-label":"Search"}),s.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2","aria-label":"Submit Search",children:s.jsx("svg",{className:"w-5 h-5 text-gray-400 hover:text-blue-500 transition-colors",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),b?s.jsx("span",{onClick:()=>{a||(e?h.push("/write#submit"):r(!0))},className:"px-4 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors",children:"Publish"}):s.jsx("span",{type:"button",onClick:()=>{a||(e?h.push("/write"):r(!0))},className:"px-4 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-colors",children:"Write"}),e?(0,s.jsxs)("div",{ref:m,className:"relative",children:[s.jsx("img",{src:e.avatar_url||"/default-avatar.png",alt:"User Avatar",className:"w-8 h-8 rounded-full cursor-pointer",onClick:()=>{u(!l)}}),l&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded-md shadow-lg z-50",children:[s.jsx("button",{onClick:()=>{u(!1),h.push(`/${e.username}`)},className:"block w-full text-left px-4 py-2 text-gray-800 hover:bg-gray-200",children:"View Profile"}),s.jsx("button",{onClick:()=>{localStorage.removeItem("token"),delete c.default.defaults.headers.common.Authorization,t(null),u(!1),h.push("/")},className:"w-full text-left px-4 py-2 text-gray-800 hover:bg-gray-200",children:"Logout"})]})]}):s.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-full hover:bg-gray-300 transition-colors",children:"Sign In"})]})]})};a()}catch(e){a(e)}})},3461:(e,t,r)=>{"use strict";r.d(t,{M:()=>a});let a="http://localhost:81"},7414:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l,a:()=>o});var a=r(6689);let s=(0,a.createContext)(),o=()=>(0,a.useContext)(s),l=s},2490:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>n});var s=r(6689),o=r(9021),l=e([o]);o=(l.then?(await l)():l)[0];let n=()=>{let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(!0),l=async()=>{try{let e=new URLSearchParams("").get("token");if(e){localStorage.setItem("token",e);let r=await (0,o.et)();t(r),window.history.replaceState({},document.title,"/")}else if(localStorage.getItem("token")){let e=await (0,o.et)();t(e)}}catch(e){console.error("Error during authentication:",e),localStorage.removeItem("token"),alert("Đăng nhập thất bại. Vui l\xf2ng thử lại.")}finally{a(!1)}};return(0,s.useEffect)(()=>{l()},[]),{user:e,setUser:t,loading:r}};a()}catch(e){a(e)}})},4926:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>u});var s=r(997),o=r(6689),l=r(7414),n=r(8262),c=r(3352),i=r(2490);r(6764);var d=e([n,i]);[n,i]=d.then?(await d)():d;let u=function({Component:e,pageProps:t}){let{user:r,setUser:a,loading:d}=(0,i.Z)(),[u,m]=(0,o.useState)(!1);return(0,s.jsxs)(l.Z.Provider,{value:{user:r,setUser:a,setModalOpen:m,loading:d},children:[s.jsx("div",{className:"border-b border-gray-300",children:s.jsx(n.Z,{})}),s.jsx(c.Z,{isOpen:u,onClose:()=>m(!1)}),s.jsx(e,{...t})]})};a()}catch(e){a(e)}})},9021:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Lj:()=>c,YI:()=>d,bg:()=>u,et:()=>n,ww:()=>i});var s=r(4716),o=r(6607),l=e([s,o]);[s,o]=l.then?(await l)():l;let n=async()=>(await s.Z.get("/api/me")).data,c=async(e,t)=>(await s.Z.put(`/api/users/${e}`,t)).data,i=async e=>(await s.Z.get(`/api/users/${e}/posts`)).data.data,d=async e=>{try{return(await o.Z.get(`/public/${e}/profile`)).data}catch(t){throw console.error(`Error fetching profile for ${e}:`,t),t}},u=async(e,t=1,r=10)=>{try{let a=(await o.Z.get(`/public/${e}/posts`,{params:{page:t,limit:r}})).data;if(!a||!Array.isArray(a.data)||"number"!=typeof a.total_count)throw Error("Invalid response format for getUserPosts");return{posts:a.data,totalCount:a.total_count}}catch(t){throw console.error(`Error fetching posts for user "${e}":`,t),t}};a()}catch(e){a(e)}})},4716:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>c});var s=r(9648),o=r(3461),l=e([s]);let n=(s=(l.then?(await l)():l)[0]).default.create({baseURL:o.M});n.interceptors.request.use(e=>e,e=>Promise.reject(e));let c=n;a()}catch(e){a(e)}})},6607:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>n});var s=r(9648),o=r(3461),l=e([s]);let n=(s=(l.then?(await l)():l)[0]).default.create({baseURL:o.M});a()}catch(e){a(e)}})},6764:()=>{}};