(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{2078:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/category/[name]",function(){return l(8051)}])},8051:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return v}});var t=l(5893);l(7294);var n=l(1163),o=l(1415),r=l(1664),i=l.n(r),a=()=>{let{pathname:e}=(0,n.useRouter)(),s=e.split("/").filter(e=>e);return(0,t.jsx)("nav",{className:"text-sm mb-4 text-gray-600",children:(0,t.jsxs)("ul",{className:"flex space-x-2",children:[(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/",className:"hover:underline",children:"Home"})}),s.length>0&&(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{children:"/"}),(0,t.jsx)(i(),{href:"/".concat(s[0]),className:"ml-1 hover:underline capitalize",children:s[0]})]})]})})},d=l(5434),c=l(1888),u=e=>{let{posts:s,isLoading:l,isError:n,setSize:o,isReachingEnd:r}=e;return n?(0,t.jsx)("div",{className:"text-red-500",children:"Failed to load posts"}):l&&0===s.length?(0,t.jsx)("div",{children:"Loading..."}):(0,t.jsx)(c.Z,{items:s,renderItem:e=>e&&e.id?(0,t.jsx)(d.Z,{post:e},e.id):(console.warn("Post without id:",e),null),fetchMore:()=>{r||l||o(e=>e+1)},hasMore:!r,loader:(0,t.jsx)("div",{children:"Loading..."}),endMessage:(0,t.jsx)("p",{className:"text-center"}),className:"grid grid-cols-1 md:grid-cols-2 gap-4"})},h=l(1992),x=l(6067);let f=e=>{var s,l,t,n;let o=async(s,l)=>{try{let t=await (0,x.Td)(e,s,l);return{posts:t.posts,totalCount:t.totalCount}}catch(s){throw console.error('Error fetching posts for category "'.concat(e,'":'),s),s}},{data:r,error:i,size:a,setSize:d}=(0,h.ZP)((e,s)=>s&&0===s.posts.length?null:[e+1,10],e=>{let[s,l]=e;return o(s,l)}),c=!r&&!i||a>0&&r&&void 0===r[a-1],u=(null==r?void 0:null===(l=r[0])||void 0===l?void 0:null===(s=l.posts)||void 0===s?void 0:s.length)===0||r&&(null===(n=r[r.length-1])||void 0===n?void 0:null===(t=n.posts)||void 0===t?void 0:t.length)<10,f=r?r.map(e=>e.posts||[]).flat().filter((e,s,l)=>l.findIndex(s=>s.id===e.id)===s):[],p=r&&r.length>0?r[0].totalCount:0;return console.log("Combined posts:",f),console.log("Total count:",p),console.log("Is reaching end:",u),{posts:f,isLoading:c,isError:i,size:a,setSize:d,isReachingEnd:u,totalCount:p}};var p=l(7414),v=()=>{let{name:e}=(0,n.useRouter)().query,{user:s}=(0,p.a)();if(!e)return(0,t.jsx)("div",{children:"Loading..."});let{posts:l,totalCount:r,isLoading:i,isError:d,setSize:c,isReachingEnd:h}=f(e);return(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"w-1/12 p-4 h-screen sticky top-0 overflow-auto",children:(0,t.jsx)(o.Z,{})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col p-6 overflow-auto",children:[(0,t.jsx)(a,{}),(0,t.jsxs)("div",{className:"flex-1 p-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-4 center-parent",children:e}),(0,t.jsx)(u,{posts:l,isLoading:i,isError:d,setSize:c,isReachingEnd:h})]})]})]})}}},function(e){e.O(0,[445,237,778,617,152,197,889,238,607,883,472,397,888,774,179],function(){return e(e.s=2078)}),_N_E=e.O()}]);