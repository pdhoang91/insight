(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[971],{1754:function(e,s,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/me/following",function(){return i(2417)}])},2417:function(e,s,i){"use strict";i.r(s);var l=i(5893),t=i(7294),o=i(7414),n=i(1415),a=i(8148),r=i(7821),c=i(8141),d=i(2413),g=i(9346),u=i(5556);s.default=()=>{let{user:e}=(0,o.a)(),[s,i]=(0,t.useState)(!0),[m,x]=(0,t.useState)(null),[p,f]=(0,t.useState)([]),[h,w]=(0,t.useState)([]),[b,j]=(0,t.useState)([]),{activeTab:_,toggleTab:N}=(0,c.j)("Suggestions");return((0,t.useEffect)(()=>{let s=async()=>{try{let[e,s,l]=await Promise.all([(0,d.d0)(),(0,g.QL)(),(0,g.kS)()]);console.log("tabs",e),console.log("writers",s),console.log("topics",l),f(e);let t=s.map(e=>({...e,isFollowing:!1}));w(t);let o=l.map(s=>({...s,isFollowing:e.some(e=>e.name===s.name)}));j(o),i(!1)}catch(e){x("Failed to load following data."),i(!1)}};e&&s()},[e]),s)?(0,l.jsx)("div",{children:"Loading following..."}):m?(0,l.jsx)("div",{className:"text-red-500",children:m}):(0,l.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,l.jsx)("aside",{className:"lg:w-1/12 p-4 sticky top-4 h-fit",children:(0,l.jsx)(n.Z,{})}),(0,l.jsxs)("main",{className:"lg:w-8/12 p-4",children:[(0,l.jsxs)("div",{className:"flex space-x-4 mb-6 pb-2",children:[(0,l.jsx)("button",{onClick:()=>N("Suggestions"),className:"text-lg pb-2 ".concat("Suggestions"===_?"border-b-2 border-gray-200":"text-gray-600"," transition-colors duration-200"),children:"Suggestions"}),e&&(0,l.jsx)("button",{onClick:()=>N("Following"),className:"text-lg pb-2 ".concat("Following"===_?"border-b-2 border-gray-200":"text-gray-600"," transition-colors duration-200"),children:"Following"})]}),"Suggestions"===_&&(0,l.jsx)(r.Z,{category:"Suggestions to follow",initialItems:b,onFollowChange:e=>{"Suggestions"===_&&(j(s=>s.map(s=>s.id===e.id?e:s)),f(s=>{let i=s.findIndex(s=>s.category_id===e.id);if(e.isFollowing){if(-1===i)return[...s,{category_id:e.id,name:e.name,description:e.description}]}else if(-1!==i){let e=[...s];return e.splice(i,1),e}return s}))}}),"Following"===_&&(0,l.jsx)("div",{children:h.map(e=>(0,l.jsxs)("div",{className:"mb-4 p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,l.jsx)(u.Z,{author:{id:e.user_id,username:e.username,name:e.name,avatar_url:e.avatar_url}}),(0,l.jsx)("p",{className:"text-gray-600",children:e.email}),(0,l.jsx)("p",{className:"text-gray-600",children:e.phone})]},e.user_id))})]}),(0,l.jsx)("aside",{className:"lg:w-3/12 p-4 sticky top-4 h-fit",children:(0,l.jsx)(a.Z,{})})]})}}},function(e){e.O(0,[445,237,197,889,238,849,631,888,774,179],function(){return e(e.s=1754)}),_N_E=e.O()}]);