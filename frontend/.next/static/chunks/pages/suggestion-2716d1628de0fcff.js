(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{5803:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/suggestion",function(){return t(5842)}])},5842:function(e,s,t){"use strict";t.r(s);var i=t(5893),l=t(7294),o=t(7414),n=t(1415),a=t(8148),r=t(7821),c=t(8141),d=t(2413),g=t(9346),u=t(5556);s.default=()=>{let{user:e}=(0,o.a)(),[s,t]=(0,l.useState)(!0),[m,x]=(0,l.useState)(null),[p,h]=(0,l.useState)([]),[f,w]=(0,l.useState)([]),[b,j]=(0,l.useState)([]),{activeTab:_,toggleTab:N}=(0,c.j)("Suggestions");return((0,l.useEffect)(()=>{let s=async()=>{try{let[e,s,i]=await Promise.all([(0,d.d0)(),(0,g.QL)(),(0,g.kS)()]);console.log("tabs",e),console.log("writers",s),console.log("topics",i),h(e);let l=s.map(e=>({...e,isFollowing:!1}));w(l);let o=i.map(s=>({...s,isFollowing:e.some(e=>e.name===s.name)}));j(o),t(!1)}catch(e){x("Failed to load following data."),t(!1)}};e&&s()},[e]),s)?(0,i.jsx)("div",{children:"Loading following..."}):m?(0,i.jsx)("div",{className:"text-red-500",children:m}):(0,i.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,i.jsx)("aside",{className:"lg:w-1/12 p-4 sticky top-4 h-fit",children:(0,i.jsx)(n.Z,{})}),(0,i.jsxs)("main",{className:"lg:w-8/12 p-4",children:[(0,i.jsxs)("div",{className:"flex space-x-4 mb-6 pb-2",children:[(0,i.jsx)("button",{onClick:()=>N("Suggestions"),className:"text-lg pb-2 ".concat("Suggestions"===_?"border-b-2 border-gray-200":"text-gray-600"," transition-colors duration-200"),children:"Suggestions"}),e&&(0,i.jsx)("button",{onClick:()=>N("Following"),className:"text-lg pb-2 ".concat("Following"===_?"border-b-2 border-gray-200":"text-gray-600"," transition-colors duration-200"),children:"Following"})]}),"Suggestions"===_&&(0,i.jsx)(r.Z,{category:"Suggestions to follow",initialItems:b,onFollowChange:e=>{"Suggestions"===_&&(j(s=>s.map(s=>s.id===e.id?e:s)),h(s=>{let t=s.findIndex(s=>s.category_id===e.id);if(e.isFollowing){if(-1===t)return[...s,{category_id:e.id,name:e.name,description:e.description}]}else if(-1!==t){let e=[...s];return e.splice(t,1),e}return s}))}}),"Following"===_&&(0,i.jsx)("div",{children:f.map(e=>(0,i.jsxs)("div",{className:"mb-4 p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,i.jsx)(u.Z,{author:{id:e.user_id,username:e.username,name:e.name,avatar_url:e.avatar_url}}),(0,i.jsx)("p",{className:"text-gray-600",children:e.email}),(0,i.jsx)("p",{className:"text-gray-600",children:e.phone})]},e.user_id))})]}),(0,i.jsx)("aside",{className:"lg:w-3/12 p-4 sticky top-4 h-fit",children:(0,i.jsx)(a.Z,{})})]})}}},function(e){e.O(0,[445,237,197,889,238,849,631,888,774,179],function(){return e(e.s=5803)}),_N_E=e.O()}]);