(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[183],{5957:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/category",function(){return s(4337)}])},4337:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var n=s(5893);s(7294);var a=s(1415),r=s(1888),i=s(1664),l=s.n(i),o=s(5434),c=s(9820),d=s(6067);let h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,{data:s,error:n}=(0,c.ZP)(["/categories",e,1,t],()=>(0,d.Td)(e,1,t));return{posts:s?s.posts:[],totalCount:s?s.totalCount:0,isLoading:!n&&!s,isError:n}};var u=e=>{let{category:t}=e,{posts:s,isLoading:a,isError:r}=h(t.name,2);return(0,n.jsxs)("div",{className:" rounded p-4 transition-shadow mb-6",children:[(0,n.jsx)("h2",{className:"center-parent text-xl font-semibold mb-2",children:(0,n.jsx)(l(),{href:"/category/".concat(encodeURIComponent(t.name)),className:"text-blue-500 hover:underline",children:t.name})}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:t.description}),r&&(0,n.jsx)("p",{className:"text-red-500",children:"Failed to load posts for this category."}),a?(0,n.jsx)("p",{children:"Loading posts..."}):(0,n.jsx)("div",{children:s.length>0?s.map(e=>(0,n.jsx)(o.Z,{post:e},e.id)):(0,n.jsx)("p",{className:"text-gray-600",children:"No posts available for this category."})})]})},x=s(1992);let m=()=>{var e,t,s,n;let a=async(e,t)=>await (0,d.CP)(e,t),{data:r,error:i,size:l,setSize:o}=(0,x.ZP)((e,t)=>{var s;return 0===e?[e+1,10]:t&&(null===(s=t.categories)||void 0===s?void 0:s.length)!==0?[e+1,10]:null},e=>{let[t,s]=e;return a(t,s)}),c=!r&&!i||l>0&&r&&void 0===r[l-1],h=(null==r?void 0:null===(t=r[0])||void 0===t?void 0:null===(e=t.categories)||void 0===e?void 0:e.length)===0||r&&(null===(n=r[r.length-1])||void 0===n?void 0:null===(s=n.categories)||void 0===s?void 0:s.length)<10;return{categories:r?r.map(e=>e.categories||[]).flat().filter((e,t,s)=>s.findIndex(t=>t.id===e.id)===t):[],isLoading:c,isError:i,size:l,setSize:o,isReachingEnd:h,totalCount:r&&r.length>0?r[0].totalCount:0}};var g=s(2914),p=()=>{let{categories:e,isLoading:t,isError:s,setSize:a,isReachingEnd:i,totalCount:l}=m();return s?(0,n.jsx)("div",{className:"text-red-500 text-center",children:(0,n.jsx)("p",{children:"Kh\xf4ng thể tải danh mục. Vui l\xf2ng thử lại sau."})}):(0,n.jsx)(r.Z,{items:e,renderItem:e=>e&&e.id?(0,n.jsx)(u,{category:e},e.id):(console.warn("Category without id:",e),null),fetchMore:()=>{i||t||a(e=>e+1)},hasMore:!i,loader:(0,n.jsxs)("div",{className:"flex justify-center items-center my-4",children:[(0,n.jsx)(g.fCD,{className:"animate-spin text-gray-500 mr-2"}),(0,n.jsx)("span",{className:"text-gray-500",children:"Đang tải..."})]}),endMessage:(0,n.jsx)("p",{className:"text-center mt-4"}),className:"grid grid-cols-1 sm:grid-cols-2 gap-6"})},v=()=>(0,n.jsx)(p,{}),j=()=>(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"w-1/12 p-4 h-screen sticky top-0 overflow-auto",children:(0,n.jsx)(a.Z,{})}),(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-4 center-parent",children:"Categories"}),(0,n.jsx)(v,{})]})]})}},function(e){e.O(0,[445,237,778,617,152,197,889,238,607,883,472,397,888,774,179],function(){return e(e.s=5957)}),_N_E=e.O()}]);